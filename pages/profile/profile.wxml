<!-- pages/profile/profile.wxml -->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="card user-card">
    <button wx:if="{{!userInfo}}" class="login-btn" open-type="getUserInfo" bindgetuserinfo="onGetUserInfo">
      <text>ç‚¹å‡»ç™»å½•</text>
    </button>
    
    <view wx:else class="user-info">
      <image class="avatar" src="{{userInfo.avatarUrl}}"/>
      <text class="nickname">{{userInfo.nickName}}</text>
    </view>
  </view>

  <!-- è€ƒè¯•è®¾ç½® -->
  <view class="card">
    <view class="section-title">ğŸ“… è€ƒè¯•è®¾ç½®</view>
    
    <!-- è€ƒè¯•åç§° -->
    <view class="setting-item" bindtap="setExamName">
      <text class="setting-label">è€ƒè¯•åç§°</text>
      <text class="setting-value">{{examName || 'æœªè®¾ç½®'}}</text>
      <text class="setting-arrow">></text>
    </view>
    
    <!-- è€ƒè¯•æ—¥æœŸ - æ»šè½®é€‰æ‹© -->
    <picker mode="date" value="{{examDate}}" bindchange="onExamDateChange">
      <view class="setting-item">
        <text class="setting-label">è€ƒè¯•æ—¥æœŸ</text>
        <text class="setting-value">{{examDate || 'è¯·é€‰æ‹©'}}</text>
        <text class="setting-arrow">></text>
      </view>
    </picker>
    
    <view class="setting-item" wx:if="{{examDate}}">
      <text class="setting-label">å€’è®¡æ—¶</text>
      <text class="setting-value highlight">{{countdownDays}} å¤©</text>
    </view>
  </view>

  <!-- æé†’è®¾ç½® -->
  <view class="card">
    <view class="section-title">â° æ¯æ—¥æé†’</view>
    
    <view class="setting-item">
      <text class="setting-label">å¼€å¯æé†’</text>
      <switch checked="{{reminderEnabled}}" bindchange="toggleReminder" color="#333"/>
    </view>
    
    <!-- æé†’æ—¶é—´ - æ»šè½®é€‰æ‹© -->
    <picker mode="time" value="{{reminderTime}}" bindchange="onReminderTimeChange" wx:if="{{reminderEnabled}}">
      <view class="setting-item">
        <text class="setting-label">æé†’æ—¶é—´</text>
        <text class="setting-value">{{reminderTime}}</text>
        <text class="setting-arrow">></text>
      </view>
    </picker>
  </view>

  <!-- æ•°æ®ç»Ÿè®¡ -->
  <view class="card">
    <view class="section-title">ğŸ“Š å­¦ä¹ ç»Ÿè®¡</view>
    
    <view class="stats-grid">
      <view class="stat-box">
        <text class="stat-value">{{stats.totalDays}}</text>
        <text class="stat-label">å­¦ä¹ å¤©æ•°</text>
      </view>
      
      <view class="stat-box">
        <text class="stat-value">{{stats.totalQuestions}}</text>
        <text class="stat-label">æ€»é”™é¢˜æ•°</text>
      </view>
      
      <view class="stat-box">
        <text class="stat-value">{{stats.totalReviews}}</text>
        <text class="stat-label">æ€»å¤ä¹ æ¬¡æ•°</text>
      </view>
      
      <view class="stat-box">
        <text class="stat-value">{{stats.masteredCount}}</text>
        <text class="stat-label">å·²æŒæ¡</text>
      </view>
    </view>
  </view>

  <!-- æ•°æ®ç®¡ç† -->
  <view class="card">
    <view class="section-title">ğŸ’¾ æ•°æ®ç®¡ç†</view>
    
    <view class="setting-item" bindtap="exportData">
      <text class="setting-label">å¯¼å‡ºæ•°æ®</text>
      <text class="setting-arrow">></text>
    </view>
    
    <view class="setting-item danger" bindtap="clearAllData">
      <text class="setting-label">æ¸…ç©ºæ‰€æœ‰æ•°æ®</text>
      <text class="setting-arrow">></text>
    </view>
  </view>

  <!-- å…³äº -->
  <view class="card">
    <view class="section-title">â„¹ï¸ å…³äº</view>
    
    <view class="setting-item">
      <text class="setting-label">ç‰ˆæœ¬</text>
      <text class="setting-value">V00.00.02</text>
    </view>
    
    <view class="setting-item" bindtap="showAbout">
      <text class="setting-label">å…³äºéƒ­å­è€ƒå…¬</text>
      <text class="setting-arrow">></text>
    </view>
  </view>
</view>
